["/*dbe97bf347f528055ddf37adc99979217ad141d9",42,226255,"D.lib.Math\",{statics:{distance:function(b,a){return Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2))}}",226282,88977,"b,c){if(this.gameBoard[c[0]][c",315289,42,"c[0]===0){if(c[1]<0||c",315353,65,"c[0]===1){if(c[1]<0||c",315440,119,"b].row][this.gameLetters[b",315585,57,"b+\"-\"+c[0]+\"-\"+c[1]);this.gameBoard[c[0]][c[1]]=b;this.gameLetters[b].row=c[0];this.gameLetters[b].col=c[1];var a=this.getActiveLetters();if(a.length==this.gameBoard[1].length){this.checkAnswer(a)}},getActiveLetters:function(){var a;var b=\"\";for(a=0;a<this.gameBoard[1].length;a++){if(Ext.isDefined(this.gameBoard[1][a])){b+=this.gameLetters[this.gameBoard[1][a]].value}}return b},checkAnswer:function(a){var c=this._currentAction;var b=this.get(\"data\")[this._currentAction].length;Ext.Ajax.request({url:\"/guess/check\",params:{id:this.getId(),letters:a},success:function(e){var d=Ext.decode(e.responseText);if(d.status==\"CORRECT\"){this.record()}},scope:this})},record:function(){Ext.Ajax.request({url:\"/guess/\"+this.getId()+\"/record\",jsonData:{data:this.get(\"data\")},success:function(b){var a=Ext.decode(b.responseText);console.log(a)},scope:this})",315749,15145,331056,92,",initialize:function(){this.setData(",330899,156,")}});Ext.define(\"D.view.drawing.Player",202670,33,"drawingplayer\",config:{items:[{xtype:\"canvas\"}],listeners:{painted:function(){this.canvas=this.element.down(\"canvas\",true",347555,128,"}},statics:{DRAW_INTERVAL:250},play:function(){this.drawingData=this.getRecord().get(\"data\");this.currentIndex=0;this._drawLoop(this)},skip:function(){this._skipped=true},_drawLoop:function(a){a._draw(a.drawingData[a.currentIndex]);a.currentIndex++;if(a.currentIndex<a.drawingData.length){if(a._skipped){a._drawLoop(a)}else{setTimeout(a._drawLoop,D.view.drawing.Player.DRAW_INTERVAL,a)}}},_drawStroke:function(b,d,a,c){this.context.beginPath();this.context.moveTo(b,d)",348025,53,"context.closePath()},_draw:function(b){var a=b.split(\"-\");switch(a[0]){case\"p\":this._drawStroke(a[2],a[3],a[4],a[5]);break}this.fireEvent(\"playback.move\",this.currentIndex)",331147,165,"D.view.game.WordPicker\",{id:\"wordPickerView",329968,33,"title:\"What do you want to draw?",360650,36,",pack:\"center\"},items:[",330121,41,"div class=\"word-difficulty\">{difficulty}</div><div>{value}</div>'}]",331296,2654,"D.model.Word",333232,76,"value\",type:\"string\"},{name:\"difficulty\",type:\"string\"},{name:\"locale\"}],proxy:{type:\"rest\",url:\"/word",333931,14598,"view.game.Guess",348990,37,"D.lib.Math\",\"D.view.drawing.Player\"],config:{",346425,53,"layout:\"hbox\",items:[{xtype:\"button\",id:\"skip-button\",text:\"Skip\",docked:\"left\"},{xtype:\"button\",id:\"give-up-button\",text:\"Give up\",docked:\"right\"}]},{centered:true,xtype:\"drawingplayer\"},{xtype:\"container\",docked:\"bottom\",layout:\"vbox\",items:[{xtype:\"container\",id:\"guessRow\",cls:\"game-board\",layout:{type:\"hbox\",align:\"middle\",pack:\"center\"}},{xtype:\"container\",id:\"lettersRow\",layout:{type:\"hbox\",align:\"middle\",pack:\"center\"}}]}],listeners:{",374124,32,".child(\"drawingplayer\");var d=this.getRecord();b.setRecord(d.getDrawing());b.on(\"playback.move\",d.setCurrentAction,d);var c=this;var a;for(a=0;a<this.getRecord().get(\"word_length\");a++){Ext.getCmp(\"guessRow\").add({id:\"game-board-1-\"+a,xtype:\"component\",cls:\"slot\",data:{row:1,col:a},width:26,height:26,margin:4,listeners:{painted:function(){}}})}Ext.Array.each(this.getRecord().get(\"letters\"),function(f,e){Ext.getCmp(\"lettersRow\").add({id:\"game-board-0-\"+e,data:{row:0,col:e},cls:\"letterHolder\",xtype:\"component\",width:26,height:26,margin:4});Ext.Viewport.add({renderTo:Ext.Viewport.element,id:\"letter-\"+e,style:\"position: absolute;\",width:26,height:26,hidden:true,cls:\"letter\",xtype:\"component\",html:f,data:{letterIndex:e},draggable:{constraint:null,direction:\"both\",listeners:{drag:function(h,i,g,j){},dragstart:function(){},dragend:function(o,i,m,k){var n=o.getElement();var g=false;Ext.select(\".slot\").each(function(s,w,q){var v=D.lib.Math.distance(s.getXY(),n.getXY());if(v<10){var p=Ext.getCmp(s.getId());var u=[p.getData().row,p.getData().col];var r=Ext.getCmp(n.getId());try{c.getRecord().move(r.getData().letterIndex,u);n.setXY(s.getXY());g=true}catch(t){console.log(t)}}});Ext.select(\".letterHolder\").each(function(r,w,p){var v=D.lib.Math.distance(r.getXY(),n.getXY());if(v<10){var u=Ext.getCmp(r.getId());var s=[u.getData().row,u.getData().col];var q=Ext.getCmp(n.getId());try{c.getRecord().move(q.getData().letterIndex,s);n.setXY(r.getXY());g=true}catch(t){console.log(t)}}});if(!g){var l=Ext.getCmp(n.getId());var h=c.getRecord().getPosition(l.getData().letterIndex);var j=Ext.get(\"game-board-\"+h.row+\"-\"+h.col);n.setXY(j.getXY())}}}}})})},painted:function(){Ext.select(\".letterHolder\").each(function(e,f,d){Ext.get(\"letter-\"+d).setXY(e.getXY()).show()});var b=this.child(\"drawingplayer\");b.play();var a=this.down(\"#skip-button\");a.on(\"tap\",function(){this.disable();b.skip()});var c=this.down(\"#give-up-button\");c.on(\"tap\",function(){Ext.Msg.confirm(\"Give up\",\"End your streak and start over?\",function(d){if(d===\"yes\"){this.fireEvent(\"guess.giveup\")}},this)})}}",348511,461,"D.store.Words\",{extend:\"Ext.data.Store\",requires:\"D.model.Word\",config:{model:\"D.model.Word\"",348956,31344,",\"D.store.Words\",\"D.view.game.WordPicker\",\"D.view.game.Guess",380299,2814,",\"D.lib.Math",383112,93,",\"game.Guess",383204,587]