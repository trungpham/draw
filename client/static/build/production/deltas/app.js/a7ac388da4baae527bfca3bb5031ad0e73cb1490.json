["/*c88961e58bd2fb77053df8dcd45ffc4eb9dc1f2d",42,233503,248485,1046,233545,14940,249531,372,272627,790,314029,601,249899,22733,273426,40605,314632,627,"b,c){if(this.gameBoard[c[0]][c",315289,42,"c[0]===0){if(c[1]<0||c",315353,65,"c[0]===1){if(c[1]<0||c",315440,119,"b].row][this.gameLetters[b",315585,57,"b+\"-\"+c[0]+\"-\"+c[1]);this.gameBoard[c[0]][c[1]]=b;this.gameLetters[b].row=c[0];this.gameLetters[b].col=c[1];var a=this.getActiveLetters();if(a.length==this.gameBoard[1].length){this.checkAnswer(a)}},getActiveLetters:function(){var a;var b=\"\";for(a=0;a<this.gameBoard[1].length;a++){if(Ext.isDefined(this.gameBoard[1][a])){b+=this.gameLetters[this.gameBoard[1][a]].value}}return b},checkAnswer:function(a){var c=this._currentAction;var b=this.get(\"data\")[this._currentAction].length;Ext.Ajax.request({url:\"/guess/check\",params:{id:this.getId(),letters:a},success:function(e){var d=Ext.decode(e.responseText);if(d.status==\"CORRECT\"){this.record()}},scope:this})},record:function(){Ext.Ajax.request({url:\"/guess/\"+this.getId()+\"/record\",jsonData:{data:this.get(\"data\")},success:function(b){var a=Ext.decode(b.responseText);console.log(a)},scope:this})",315749,342,316368,14542,"<tpl for=\"externalFriend\">{xid}</tpl>/picture\"/> <strong><tpl for=\"externalFriend\">{externalFriend}</tpl>name",330971,152,331285,92,",initialize:function(){this.setData(",331128,156,")",381216,165,"D.view.game.WordPicker\",{id:\"wordPickerView\"",345726,32,"title:\"What do you want to draw?",359554,36,",pack:\"center\"},items:[",330398,41,"div class=\"word-difficulty\">{difficulty}</div><div>{value}</div>'}]",331376,1923,"D.model.Match\"",278569,33,"{",344383,42,"urrentTurn\",type:\"integer\",defaultValue:1},{name:\"createdTime\",type:\"integer\"},{name:\"nextAction\",type:\"string\",defaultValue:\"draw\"},{name:\"drawings\",persist:true}],hasMany:[{model:\"D.model.Drawing\",name:\"drawings\",associationKey:\"drawings\"},{model:\"D.model.User\",name:\"users\"}],hasOne:[{name:\"gameStats\",model:\"D.model.GameStats\"},{name:\"externalF",344747,37,",associationKey:\"external_friend\"},{name:\"drawingToGuess\",model:\"D.model.Drawing\",associationKey:\"drawing_to_guess\"},{name:\"drawingToPlayback\",model:\"D.model.Drawing\",associationKey:\"drawing_to_playback\"}],proxy:{type:\"rest\",url:\"/matches\"}}});Ext.define(\"D.model.Word\"",278569,33,"{",344383,41,"value\",type:\"string\"},{name:\"difficulty\",type:\"string\"},{name:\"locale\"}],proxy:{type:\"rest\",url:\"/words\"}}});Ext.define(\"D.lib.Math\",{statics:{distance:function(b,a){return Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2))}}});Ext.define(\"D.view.drawing.Playe",333310,34,"drawingplayer\",config:{items:[{xtype:\"canvas\"}],listeners:{painted:function(){this.canvas=this.element.down(\"canvas\",true",346904,128,"}},statics:{DRAW_INTERVAL:250},play:function(){this.drawingData=this.getRecord().get(\"data\");this.currentIndex=0;this._drawLoop(this)},skip:function(){this._skipped=true},_drawLoop:function(a){a._draw(a.drawingData[a.currentIndex]);a.currentIndex++;if(a.currentIndex<a.drawingData.length){if(a._skipped){a._drawLoop(a)}else{setTimeout(a._drawLoop,D.view.drawing.Player.DRAW_INTERVAL,a)}}},_drawStroke:function(b,d,a,c){this.context.beginPath();this.context.moveTo(b,d)",347374,53,"context.closePath()},_draw:function(b){var a=b.split(\"-\");switch(a[0]){case\"p\":this._drawStroke(a[2],a[3],a[4],a[5]);break}this.fireEvent(\"playback.move\",this.currentIndex)",333283,14593,"D.store.Matches\",{requires:[\"D.model.Match\"],",381257,47,"Match\"",316062,64,"requires:[\"D.store.Matches\",\"D.store.PendingInvites\"]",316125,232,"store.Words\",{extend:\"Ext.data.Store\",requires:\"D.model.Word\",config:{model:\"D.model.Word\"}});Ext.define(\"D.view.game.Guess",159786,37,"D.lib.Math\",\"D.view.drawing.Player\"],config:{",345774,53,"layout:\"hbox\",items:[{xtype:\"button\",id:\"skip-button\",text:\"Skip\",docked:\"left\"},{xtype:\"button\",id:\"give-up-button\",text:\"Give up\",docked:\"right\"}]},{centered:true,xtype:\"drawingplayer\"},{xtype:\"container\",docked:\"bottom\",layout:\"vbox\",items:[{xtype:\"container\",id:\"guessRow\",cls:\"game-board\",layout:{type:\"hbox\",align:\"middle\",pack:\"center\"}},{xtype:\"container\",id:\"lettersRow\",layout:{type:\"hbox\",align:\"middle\",pack:\"center\"}}]}],listeners:{",373028,32,".child(\"drawingplayer\");var d=this.getRecord();b.setRecord(d.getDrawing());b.on(\"playback.move\",d.setCurrentAction,d);var c=this;var a;for(a=0;a<this.getRecord().get(\"word_length\");a++){Ext.getCmp(\"guessRow\").add({id:\"game-board-1-\"+a,xtype:\"component\",cls:\"slot\",data:{row:1,col:a},width:26,height:26,margin:4,listeners:{painted:function(){}}})}Ext.Array.each(this.getRecord().get(\"letters\"),function(f,e){Ext.getCmp(\"lettersRow\").add({id:\"game-board-0-\"+e,data:{row:0,col:e},cls:\"letterHolder\",xtype:\"component\",width:26,height:26,margin:4});Ext.Viewport.add({renderTo:Ext.Viewport.element,id:\"letter-\"+e,style:\"position: absolute;\",width:26,height:26,hidden:true,cls:\"letter\",xtype:\"component\",html:f,data:{letterIndex:e},draggable:{constraint:null,direction:\"both\",listeners:{drag:function(h,i,g,j){},dragstart:function(){},dragend:function(o,i,m,k){var n=o.getElement();var g=false;Ext.select(\".slot\").each(function(s,w,q){var v=D.lib.Math.distance(s.getXY(),n.getXY());if(v<10){var p=Ext.getCmp(s.getId());var u=[p.getData().row,p.getData().col];var r=Ext.getCmp(n.getId());try{c.getRecord().move(r.getData().letterIndex,u);n.setXY(s.getXY());g=true}catch(t){console.log(t)}}});Ext.select(\".letterHolder\").each(function(r,w,p){var v=D.lib.Math.distance(r.getXY(),n.getXY());if(v<10){var u=Ext.getCmp(r.getId());var s=[u.getData().row,u.getData().col];var q=Ext.getCmp(n.getId());try{c.getRecord().move(q.getData().letterIndex,s);n.setXY(r.getXY());g=true}catch(t){console.log(t)}}});if(!g){var l=Ext.getCmp(n.getId());var h=c.getRecord().getPosition(l.getData().letterIndex);var j=Ext.get(\"game-board-\"+h.row+\"-\"+h.col);n.setXY(j.getXY())}}}}})})},painted:function(){Ext.select(\".letterHolder\").each(function(e,f,d){Ext.get(\"letter-\"+d).setXY(e.getXY()).show()});var b=this.child(\"drawingplayer\");b.play();var a=this.down(\"#skip-button\");a.on(\"tap\",function(){this.disable();b.skip()});var c=this.down(\"#give-up-button\");c.on(\"tap\",function(){Ext.Msg.confirm(\"Give up\",\"End your streak and start over?\",function(d){if(d===\"yes\"){this.fireEvent(\"guess.giveup\")}},this)})}}",347860,31344,",\"D.store.Words\",\"D.view.game.WordPicker\",\"D.view.game.Guess\"],",316375,36,379242,1990,381381,726,"Ext.Viewport\",\"D.lib.Authentication\",\"D.lib.DeepJsonWriter",382127,679]